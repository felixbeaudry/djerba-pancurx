<%
  from time import strftime
  from djerba.plugins.pwgs.analysis.render.json_to_html import html_builder
  import djerba.plugins.pwgs.constants as constants
%>

<!-- ctDNA Detection -->
${html_builder().section_cells_begin("<h2>ctDNA Detection</h2>","main")}
      <h3>ctDNA Mutation Sampling: ${results.get(constants.CTDNA_OUTCOME)}</h3>
      <p >
            The number of SNVs of tumor origin detected in the plasma is
            <strong>${results.get(constants.SIGNIFICANCE)} </strong>  
            than the control cohort (N=${results.get(constants.COHORT_N)}).
      </p>

            <table class="variants" style="width:100%">
                  <thead>
                        <th style=" width:16%">Sites Checked</th>
                        <th style=" width:16%">Reads Checked</th>
                        <th style=" width:16%">Sites Detected</th>
                        <th style=" width:16%">Reads Detected</th>
                        <th style=" width:20%">Raw TF (%)</th>
                        <th style=" width:16%">p-value</th>
                  </thead>
                  <tbody>
                        <tr>
                              <td>${html_builder().k_comma_format(results.get(constants.SITES_CHECKED))}</td>
                              <td>${html_builder().k_comma_format(results.get(constants.READS_CHECKED))}</td>
                              <td>${html_builder().k_comma_format(results.get(constants.SITES_DETECTED))}</td>
                              <td>${html_builder().k_comma_format(results.get(constants.READS_DETECTED))}</td>
                              <td>${results.get(constants.TUMOUR_FRACTION_READS)}</td>
                              <td>${results.get(constants.PVALUE)}</td>
                        </tr>
                  </tbody>
            </table>
            <img id='Detection' style='width: 100%; object-fit: contain' src="${results.get(constants.PWGS_PLOT)}"/>

${html_builder().section_cells_end()}
<hr class="header-big-line" style=" width: 100%;  " >