<%
  from time import strftime
  import djerba.render.constants as constants
  from djerba.render.json_to_html import html_builder
  from djerba.util.image_to_base64 import converter
%>

<!-- Genomic Landscape -->
${html_builder().section_cells_begin("<h2>Genomic Landscape</h2>","main")}
      
      <p >
            Tumour Mutation Burden (TMB) was <strong>${genomic_landscape_info.get(constants.TMB_PER_MB)}</strong> coding mutations per Mb (${html_builder().k_comma_format(genomic_landscape_info.get(constants.TMB_TOTAL))} mutations)
            which corresponds to the ${html_builder().make_ordinal(genomic_landscape_info.get(constants.PAN_CANCER_PERCENTILE))} 
            percentile of the pan-cancer cohort and classified it as <strong>${html_builder().pull_biomarker_text(genomic_biomarkers,"TMB")}</strong>.       

            % if genomic_landscape_info.get(constants.CANCER_SPECIFIC_PERCENTILE) != "NA" :
                  This TMB placed the tumour in the <strong>${html_builder().make_ordinal(genomic_landscape_info.get(constants.CANCER_SPECIFIC_PERCENTILE))}</strong> percentile of the ${genomic_landscape_info.get(constants.CANCER_SPECIFIC_COHORT)} cohort.
            % endif

            % if sample_info_and_quality.get(constants.PURITY_PERCENT) > 50:
                  The microsatellite status was <strong>${html_builder().pull_biomarker_text(genomic_biomarkers,"MSI")}</strong>.
            % endif 
            This tumour had <strong>${html_builder().k_comma_format(ctdna.get(constants.CTDNA_CANDIDATES))}</strong> candidate somatic SNVs genome-wide, 
            making the sample <strong>${ctdna.get(constants.CTDNA_ELIGIBILITY)}</strong> for OICR's plasma WGS cfDNA assay (minimum of 4,000 SNVs required).
      
      </p>

      <!-- other biomarkers table -->
      <table class="variants" style="width:100%">
            <thead>
                  <th style=" width:10%">Biomarker</th>
                  <th style=" width:10%">Call</th>
                  <th style=" width:80%">Score & Confidence</th>
            </thead>
            <tbody>
                  % for row in html_builder().biomarker_table_rows(genomic_biomarkers, sample_info_and_quality.get(constants.PURITY_PERCENT)):
                  ${row}
                  % endfor 
            </tbody>


      </table>
     

${html_builder().section_cells_end()}
